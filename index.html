<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>創意任務板 - Creative Task Board</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
</head>
<body>
    <div id="app">
        <div class="app-header">
            <h1 class="app-title">創意任務板</h1>
            <p class="app-subtitle">管理你的創意想法與重要任務</p>
        </div>

        <div class="controls">
            <input
                v-model="newTask"
                class="task-input"
                placeholder="💭 輸入你的新想法或任務..."
                @keyup.enter="addTask"
            />
            <button @click="addTask" class="btn btn-primary">
                <span>➕</span>
                新增任務
            </button>
            <button @click="addNewList" class="btn btn-secondary">
                <span>📝</span>
                新增收集盒
            </button>
            <button @click="clearCompleted" class="btn btn-secondary">
                <span>🗑️</span>
                清除已完成
            </button>
        </div>

        <div class="board">
            <div 
                v-for="(tasks, listName) in lists" 
                :key="listName" 
                class="list"
                :data-list="listName"
            >
                <div class="list-header">
                    <div class="list-icon"></div>
                    <h3
                        v-if="!editingList[listName]"
                        class="list-title"
                        @click="startEditTitle(listName)"
                        title="點擊編輯名稱"
                    >
                        {{ listTitles[listName] }}
                    </h3>
                    <input
                        v-else
                        v-model="tempTitle"
                        class="list-title-input"
                        @blur="finishEditTitle(listName)"
                        @keyup.enter="finishEditTitle(listName)"
                        @keyup.esc="cancelEditTitle(listName)"
                        ref="titleInput"
                    />
                    <span class="list-count">{{ tasks.length }}</span>
                    <button
                        v-if="!isDefaultList(listName)"
                        @click="removeList(listName)"
                        class="list-delete-btn"
                        title="刪除收集盒"
                    >
                        ❌
                    </button>
                </div>
                
                <ul class="task-list" :ref="el => setSortable(el, listName)">
                    <li 
                        v-for="(task, index) in tasks" 
                        :key="task.id"
                        class="task-item"
                        :class="{ 'task-added': task.justAdded }"
                    >
                        <div class="task-content">
                            <input 
                                type="checkbox" 
                                class="task-checkbox"
                                v-model="task.done"
                                @change="handleTaskToggle(task, listName)"
                            />
                            <span class="task-text" :class="{ done: task.done }">
                                {{ task.text }}
                            </span>
                        </div>
                    </li>
                </ul>
                
                <div v-if="tasks.length === 0" class="empty-state">
                    <div class="empty-state-icon">{{ getEmptyStateIcon(listName) }}</div>
                    <div>{{ getEmptyStateText(listName) }}</div>
                </div>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>
